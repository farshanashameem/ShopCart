<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head', { title: 'Product Details' }) %>
  <body>
    <div class="container-fluid">
      <div class="row min-vh-100">
        <%- include('../partials/adminDashboard') %>

        <div class="col-md-9 p-5">
          <h2 class="mb-4">Product Details</h2>

          <!-- Back Button -->
          <a href="/admin/products" class="btn btn-dark mb-4">&larr; Back to Products</a>

          <div class="card shadow-sm rounded-4 p-4">
                <div class="row">
                    <!-- Left: Product info -->
                    <div class="col-md-8">
                    <h4 class="mb-3"><%= product.name %></h4>
                    <p><strong>Description:</strong> <%= product.description %></p>
                    <p><strong>Gender:</strong> <%= product.genderId %></p>
                    <p><strong>Created At:</strong> <%= product.createdAt.toLocaleDateString() %></p>
                    <p><strong>Status:</strong> 
                        <span class="badge <%= product.isActive ? 'bg-success' : 'bg-danger' %>">
                        <%= product.isActive ? 'Active' : 'Blocked' %>
                        </span>
                    </p>
                    </div>

                    <!-- Right: Product image -->
                    <div class="col-md-4 text-center">
                    <% if (variant.images && variant.images.length > 0) { %>
                        <img src="/uploads/products/<%= variant.images[0] %>" alt="Product Image" class="img-fluid rounded shadow-sm" style="max-height: 250px;">
                    <% } else { %>
                        <p class="text-muted">No image available</p>
                    <% } %>
                    </div>
                </div>

                <hr />

                <!-- Variants Table -->
                <h5 class="mt-4">Variants</h5>
                <% if (variants && variants.length > 0) { %>
                    <table class="table table-hover mt-3">
                    <thead class="table-light">
                        <tr>
                        <th>Color</th>
                        <th>Size</th>
                        <th>Fit</th>
                        <th>Price</th>
                        <th>Discount</th>
                        <th>Stock</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% variants.forEach(variant => { %>
                        <tr>
                            <td><%= variant.colorId.name %></td>
                            <td><%= variant.size %></td>
                            <td><%= variant.fitId.name %></td>
                            <td>₹<%= variant.basePrice %></td>
                            <td>₹<%= variant.discountPrice %></td>
                            <td><%= variant.stock %></td>
                        </tr>
                        <% }) %>
                    </tbody>
                    </table>
                <% } else { %>
                    <p class="text-muted">No variants available.</p>
                <% } %>
                </div>

        </div>
      </div>

      <footer class="text-center py-4 small text-muted border-top mt-4" style="font-weight: 700;">
        © 2025 | ShopCart | All Rights Reserved. | We Give You Style.
      </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
